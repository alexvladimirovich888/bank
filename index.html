<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bankrupt Simulator</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&family=Nunito:wght@400;600;700;800&display=swap');
        
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            color: #2d3436;
            user-select: none;
        }

        html {
            height: 100%;
        }

        .game-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: linear-gradient(45deg, #74b9ff, #0984e3);
            border-bottom: 4px solid #ffffff;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .game-title {
            font-family: 'Fredoka One', cursive;
            font-size: 28px;
            color: #ffffff;
            text-shadow: 3px 3px 0px #2d3436, 6px 6px 10px rgba(0, 0, 0, 0.3);
            animation: bounce 2s ease-in-out infinite;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        .nav-btn {
            background: linear-gradient(45deg, #fd79a8, #e84393);
            color: white;
            border: 3px solid #ffffff;
            border-radius: 25px;
            padding: 10px 20px;
            font-family: 'Nunito', sans-serif;
            font-weight: 800;
            text-decoration: none;
            transition: all 0.3s;
            text-transform: uppercase;
            box-shadow: 0 4px 15px rgba(232, 67, 147, 0.4);
            transform: perspective(1px) translateZ(0);
        }

        .nav-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(232, 67, 147, 0.6);
        }

        .office-background {
            flex: 1;
            background: url('https://i.postimg.cc/KvgRbcyx/Getty-Images-911333100.jpg') center/cover no-repeat;
            position: relative;
            overflow: hidden;
        }

        .office-background::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
        }

        .office-tile {
            display: none;
        }

        .dialogue-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(145deg, #ffffff, #f1f2f6);
            border: 4px solid #2d3436;
            border-radius: 25px;
            padding: 35px;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2), inset 0 2px 5px rgba(255, 255, 255, 0.8);
            z-index: 10;
        }

        .dialogue-text {
            font-size: 20px;
            margin-bottom: 25px;
            line-height: 1.5;
            color: #2d3436;
            font-weight: 600;
            animation: wiggle 3s ease-in-out infinite;
        }

        .choice-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .choice-btn {
            background: linear-gradient(45deg, #00b894, #00cec9);
            color: white;
            border: 3px solid #ffffff;
            border-radius: 20px;
            padding: 15px 30px;
            font-family: 'Nunito', sans-serif;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            font-size: 16px;
            box-shadow: 0 6px 20px rgba(0, 184, 148, 0.4);
            position: relative;
            overflow: hidden;
        }

        .choice-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 30px rgba(0, 184, 148, 0.6);
        }

        .choice-btn:active {
            transform: translateY(0px) scale(0.98);
        }

        .meters-container {
            background: linear-gradient(45deg, #2d3436, #636e72);
            padding: 20px;
            border-top: 4px solid #ffffff;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.3);
        }

        .meter {
            text-align: center;
        }

        .meter-label {
            font-size: 14px;
            margin-bottom: 10px;
            font-weight: 800;
            color: #ffffff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .meter-bar {
            width: 100%;
            height: 20px;
            background: #ddd;
            border: 3px solid #ffffff;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .meter-fill {
            height: 100%;
            transition: width 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            border-radius: 12px;
            position: relative;
        }

        .stability-fill {
            background: linear-gradient(90deg, #e17055, #fdcb6e, #00b894);
        }

        .trust-fill {
            background: linear-gradient(90deg, #636e72, #74b9ff, #0984e3);
        }

        .cash-fill {
            background: linear-gradient(90deg, #d63031, #fdcb6e, #00b894);
        }

        .meter-fill::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            right: 2px;
            height: 40%;
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.3), transparent);
            border-radius: 10px;
        }

        .cash-value {
            font-size: 18px;
            font-weight: 800;
            color: #00b894;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            margin-top: 5px;
        }

        .popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .popup-content {
            background: linear-gradient(145deg, #ffffff, #f1f2f6);
            border: 4px solid #2d3436;
            border-radius: 25px;
            padding: 40px;
            text-align: center;
            max-width: 450px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3), inset 0 2px 5px rgba(255, 255, 255, 0.8);
        }

        .popup-text {
            font-size: 22px;
            margin-bottom: 30px;
            color: #2d3436;
            font-weight: 700;
            animation: bounce 1.5s infinite;
        }

        .popup-btn {
            background: linear-gradient(45deg, #fd79a8, #e84393);
            color: white;
            border: 3px solid #ffffff;
            border-radius: 20px;
            padding: 15px 30px;
            font-family: 'Nunito', sans-serif;
            font-weight: 800;
            cursor: pointer;
            text-transform: uppercase;
            font-size: 16px;
            box-shadow: 0 6px 20px rgba(232, 67, 147, 0.4);
            transition: all 0.3s;
        }

        .popup-btn:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 10px 30px rgba(232, 67, 147, 0.6);
        }

        .game-over {
            background: linear-gradient(145deg, #e17055, #d63031) !important;
            border-color: #ffffff !important;
        }

        .game-over .popup-text {
            color: white;
            font-size: 32px;
            font-weight: 900;
            text-shadow: 3px 3px 0px #2d3436;
            animation: shake 0.5s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        @keyframes wiggle {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(1deg); }
            75% { transform: rotate(-1deg); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-2px); }
            75% { transform: translateX(2px); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .hidden {
            display: none !important;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="game-container">
   <header class="header">
    <h1 class="game-title" id="gameTitle">BANKRUPT SIMULATOR</h1>
    <div class="nav-buttons"><a href="https://pump.fun" target="_blank" rel="noopener noreferrer" class="nav-btn">X</a> <a href="https://pump.fun" target="_blank" rel="noopener noreferrer" class="nav-btn">pump.fun</a>
    </div>
   </header>
   <main class="office-background" id="officeGrid">
    <div class="dialogue-container" id="dialogueBox">
     <div class="dialogue-text" id="dialogueText">
      A client requests a loan. What will you do?
     </div>
     <div class="choice-buttons"><button class="choice-btn" id="approveBtn" onclick="makeChoice('approve')">APPROVE</button> <button class="choice-btn" id="rejectBtn" onclick="makeChoice('reject')">REJECT</button>
     </div>
    </div>
   </main>
   <footer class="meters-container">
    <div class="meter">
     <div class="meter-label">
      STABILITY METER
     </div>
     <div class="meter-bar">
      <div class="meter-fill stability-fill" id="stabilityFill" style="width: 100%;"></div>
     </div>
    </div>
    <div class="meter">
     <div class="meter-label">
      PUBLIC TRUST METER
     </div>
     <div class="meter-bar">
      <div class="meter-fill trust-fill" id="trustFill" style="width: 100%;"></div>
     </div>
    </div>
    <div class="meter">
     <div class="meter-label">
      CASH FLOW
     </div>
     <div class="meter-bar">
      <div class="meter-fill cash-fill" id="cashFill" style="width: 50%;"></div>
     </div>
     <div class="cash-value" id="cashValue">
      $50,000
     </div>
    </div>
   </footer>
  </div><!-- Popup for consequences -->
  <div class="popup" id="consequencePopup">
   <div class="popup-content">
    <div class="popup-text" id="consequenceText"></div><button class="popup-btn" onclick="closePopup()">CONTINUE</button>
   </div>
  </div><!-- Game Over Popup -->
  <div class="popup" id="gameOverPopup">
   <div class="popup-content game-over">
    <div class="popup-text">
     SYSTEM COLLAPSE<br>
     The economy has imploded!
    </div><button class="popup-btn" onclick="restartGame()">TRY AGAIN</button>
   </div>
  </div><!-- Random Event Popup -->
  <div class="popup" id="eventPopup">
   <div class="popup-content">
    <div class="popup-text" id="eventText"></div>
    <div class="choice-buttons" id="eventChoices"><button class="choice-btn" onclick="handleEventChoice('approve')">APPROVE</button> <button class="choice-btn" onclick="handleEventChoice('reject')">REJECT</button> <button class="choice-btn" onclick="handleEventChoice('delay')">DELAY</button>
    </div>
   </div>
  </div>
  <script>
        // Game state
        let gameState = {
            stability: 100,
            trust: 100,
            cashFlow: 50,
            round: 1,
            gameOver: false
        };

        // Configuration object
        const defaultConfig = {
            game_title: "BANKRUPT SIMULATOR",
            initial_scenario: "A client requests a loan. What will you do?",
            approve_button: "APPROVE",
            reject_button: "REJECT",
            font_family: "Nunito",
            font_size: 16
        };

        // Game scenarios
        const scenarios = [
            "A client requests a loan. What will you do?",
            "Market volatility detected. Adjust interest rates?",
            "Regulatory audit incoming. How do you respond?",
            "Major client threatens to withdraw funds. Your move?",
            "Economic downturn predicted. What's your strategy?",
            "Competitor offers better rates. How do you compete?",
            "Government bailout offered. Do you accept?",
            "Whistleblower reports irregularities. Your response?"
        ];

        const consequences = {
            approve: [
                "You gained short-term profit but increased risk.",
                "Risky decision paid off... for now.",
                "Market confidence boosted, but danger lurks.",
                "Quick gains mask underlying instability."
            ],
            reject: [
                "You stayed safe but lost market share.",
                "Conservative approach maintains stability.",
                "Missed opportunity, but avoided disaster.",
                "Cautious move preserves public trust."
            ]
        };

        const randomEvents = [
            {
                text: "Investor threatens to withdraw funds!",
                type: "critical"
            },
            {
                text: "Inflation rises sharply!",
                type: "critical"
            },
            {
                text: "Competitor opens a new branch nearby!",
                type: "warning"
            },
            {
                text: "Your accountant quit — now he's a DJ!",
                type: "humorous"
            },
            {
                text: "Coffee machine broke — staff productivity drops!",
                type: "humorous"
            },
            {
                text: "Government audit scheduled for next week!",
                type: "critical"
            },
            {
                text: "Celebrity endorses your bank on social media!",
                type: "positive"
            },
            {
                text: "Janitor found $500 in the couch!",
                type: "humorous"
            },
            {
                text: "Market volatility reaches new highs!",
                type: "critical"
            },
            {
                text: "Your rival bank's CEO got arrested!",
                type: "positive"
            }
        ];

        // Make choice function
        function makeChoice(choice) {
            if (gameState.gameOver) return;

            const isApprove = choice === 'approve';
            const stabilityChange = isApprove ? -Math.random() * 20 - 5 : -Math.random() * 10;
            const trustChange = isApprove ? Math.random() * 15 - 10 : -Math.random() * 15 - 5;
            const cashChange = isApprove ? Math.random() * 20 - 5 : -Math.random() * 10 - 5;

            gameState.stability = Math.max(0, gameState.stability + stabilityChange);
            gameState.trust = Math.max(0, gameState.trust + trustChange);
            gameState.cashFlow = Math.max(0, Math.min(100, gameState.cashFlow + cashChange));

            updateMeters();

            // Show consequence
            const consequenceText = consequences[choice][Math.floor(Math.random() * consequences[choice].length)];
            showConsequence(consequenceText);

            gameState.round++;

            // Check game over
            if (gameState.stability <= 0 && gameState.trust <= 0) {
                setTimeout(() => {
                    gameOver();
                }, 2000);
            } else {
                // Schedule random event
                setTimeout(() => {
                    if (!gameState.gameOver && Math.random() < 0.4) {
                        triggerRandomEvent();
                    }
                }, Math.random() * 5000 + 3000);
            }
        }

        // Update meters
        function updateMeters() {
            document.getElementById('stabilityFill').style.width = gameState.stability + '%';
            document.getElementById('trustFill').style.width = gameState.trust + '%';
            document.getElementById('cashFill').style.width = gameState.cashFlow + '%';
            document.getElementById('cashValue').textContent = '$' + Math.round(gameState.cashFlow * 1000).toLocaleString();
        }

        // Show consequence popup
        function showConsequence(text) {
            document.getElementById('consequenceText').textContent = text;
            document.getElementById('consequencePopup').style.display = 'flex';
        }

        // Close consequence popup
        function closePopup() {
            document.getElementById('consequencePopup').style.display = 'none';
            nextScenario();
        }

        // Next scenario
        function nextScenario() {
            if (gameState.gameOver) return;
            
            const newScenario = scenarios[Math.floor(Math.random() * scenarios.length)];
            document.getElementById('dialogueText').textContent = newScenario;
        }

        // Trigger random event
        function triggerRandomEvent() {
            if (gameState.gameOver) return;
            
            const event = randomEvents[Math.floor(Math.random() * randomEvents.length)];
            document.getElementById('eventText').textContent = event.text;
            document.getElementById('eventPopup').style.display = 'flex';
            
            // Store current event for handling choices
            gameState.currentEvent = event;
        }

        // Handle event choices
        function handleEventChoice(choice) {
            if (!gameState.currentEvent) return;
            
            const event = gameState.currentEvent;
            let stabilityChange = 0;
            let trustChange = 0;
            let cashChange = 0;

            // Apply effects based on event type and choice
            switch (event.type) {
                case 'critical':
                    if (choice === 'approve') {
                        stabilityChange = -Math.random() * 30 - 10;
                        cashChange = Math.random() * 15 - 5;
                    } else if (choice === 'reject') {
                        trustChange = -Math.random() * 20 - 5;
                        stabilityChange = Math.random() * 10;
                    } else { // delay
                        stabilityChange = -Math.random() * 15;
                        trustChange = -Math.random() * 10;
                    }
                    break;
                case 'positive':
                    if (choice === 'approve') {
                        trustChange = Math.random() * 20 + 10;
                        cashChange = Math.random() * 15 + 5;
                    } else {
                        trustChange = Math.random() * 10;
                    }
                    break;
                case 'humorous':
                    if (choice === 'approve') {
                        trustChange = Math.random() * 10 + 5;
                        cashChange = Math.random() * 10 - 5;
                    } else {
                        stabilityChange = Math.random() * 5;
                    }
                    break;
                default: // warning
                    if (choice === 'approve') {
                        stabilityChange = -Math.random() * 15;
                        cashChange = Math.random() * 10;
                    } else {
                        trustChange = -Math.random() * 10;
                    }
            }

            // Apply changes
            gameState.stability = Math.max(0, gameState.stability + stabilityChange);
            gameState.trust = Math.max(0, gameState.trust + trustChange);
            gameState.cashFlow = Math.max(0, Math.min(100, gameState.cashFlow + cashChange));

            updateMeters();

            document.getElementById('eventPopup').style.display = 'none';
            gameState.currentEvent = null;

            // Check game over after event
            if (gameState.stability <= 0 && gameState.trust <= 0) {
                setTimeout(() => {
                    gameOver();
                }, 1000);
            }
        }

        // Game over
        function gameOver() {
            gameState.gameOver = true;
            document.getElementById('gameOverPopup').style.display = 'flex';
        }

        // Restart game
        function restartGame() {
            gameState = {
                stability: 100,
                trust: 100,
                cashFlow: 50,
                round: 1,
                gameOver: false
            };
            
            updateMeters();
            document.getElementById('gameOverPopup').style.display = 'none';
            document.getElementById('dialogueText').textContent = window.elementSdk?.config?.initial_scenario || defaultConfig.initial_scenario;
        }

        // Element SDK implementation
        async function render(config) {
            const customFont = config.font_family || defaultConfig.font_family;
            const baseSize = config.font_size || defaultConfig.font_size;
            
            document.getElementById('gameTitle').textContent = config.game_title || defaultConfig.game_title;
            document.getElementById('dialogueText').textContent = config.initial_scenario || defaultConfig.initial_scenario;
            document.getElementById('approveBtn').textContent = config.approve_button || defaultConfig.approve_button;
            document.getElementById('rejectBtn').textContent = config.reject_button || defaultConfig.reject_button;
            
            // Apply font family
            document.body.style.fontFamily = `${customFont}, sans-serif`;
            
            // Apply font sizes proportionally
            document.getElementById('gameTitle').style.fontSize = `${baseSize * 1.75}px`;
            document.getElementById('dialogueText').style.fontSize = `${baseSize * 1.25}px`;
            document.querySelectorAll('.choice-btn').forEach(btn => {
                btn.style.fontSize = `${baseSize}px`;
            });
            document.querySelectorAll('.meter-label').forEach(label => {
                label.style.fontSize = `${baseSize}px`;
            });
        }

        function mapToCapabilities(config) {
            return {
                recolorables: [
                    {
                        get: () => config.background_color || "#ff9a9e",
                        set: (value) => {
                            config.background_color = value;
                            window.elementSdk.setConfig({ background_color: value });
                        }
                    },
                    {
                        get: () => config.header_color || "#74b9ff",
                        set: (value) => {
                            config.header_color = value;
                            window.elementSdk.setConfig({ header_color: value });
                        }
                    },
                    {
                        get: () => config.button_color || "#00b894",
                        set: (value) => {
                            config.button_color = value;
                            window.elementSdk.setConfig({ button_color: value });
                        }
                    },
                    {
                        get: () => config.accent_color || "#fd79a8",
                        set: (value) => {
                            config.accent_color = value;
                            window.elementSdk.setConfig({ accent_color: value });
                        }
                    }
                ],
                borderables: [],
                fontEditable: {
                    get: () => config.font_family || "Nunito",
                    set: (value) => {
                        config.font_family = value;
                        window.elementSdk.setConfig({ font_family: value });
                    }
                },
                fontSizeable: {
                    get: () => config.font_size || 16,
                    set: (value) => {
                        config.font_size = value;
                        window.elementSdk.setConfig({ font_size: value });
                    }
                }
            };
        }

        function mapToEditPanelValues(config) {
            return new Map([
                ["game_title", config.game_title || defaultConfig.game_title],
                ["initial_scenario", config.initial_scenario || defaultConfig.initial_scenario],
                ["approve_button", config.approve_button || defaultConfig.approve_button],
                ["reject_button", config.reject_button || defaultConfig.reject_button]
            ]);
        }

        // Initialize everything
        document.addEventListener('DOMContentLoaded', () => {
            if (window.elementSdk) {
                window.elementSdk.init({
                    defaultConfig,
                    render,
                    mapToCapabilities,
                    mapToEditPanelValues
                });
            }
        });
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'993309371762db9f',t:'MTc2MTI0MTM5OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
